@model IEnumerable<Sany3y.Infrastructure.Models.User>

@{
    ViewData["Title"] = "Ø§Ø­Ø¬Ø² Ù…Ø¹ Ø£ÙØ¶Ù„ Ø§Ù„ØµÙ†Ø§ÙŠØ¹ÙŠØ©";
}

<style>
    :root {
        --primary-green: #004d00;
        --secondary-green: #006400;
        --accent-yellow: #ffb300;
        --light-bg: #f0f2f5;
        --text-dark: #2c3e50;
        --border-color: #e0e0e0;
    }

    body {
        background-color: var(--light-bg);
    }

    /* Search Bar Section */
    .search-section {
        background: var(--primary-green);
        padding: 20px 0;
        color: white;
        margin-bottom: 30px;
    }

    .search-container {
        background: white;
        border-radius: 8px;
        padding: 10px;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    .search-item {
        flex: 1;
        min-width: 200px;
        border-left: 1px solid #eee; /* RTL: border-left acts as separator */
        padding: 0 15px;
        position: relative;
    }

        .search-item:last-child {
            border-left: none;
        }

    .search-label {
        display: block;
        font-size: 0.8rem;
        color: #888;
        margin-bottom: 5px;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .search-select {
        width: 100%;
        border: none;
        font-weight: bold;
        color: var(--text-dark);
        outline: none;
        background: transparent;
        cursor: pointer;
    }

    .search-btn {
        background: var(--accent-yellow);
        color: white;
        border: none;
        padding: 0 40px;
        font-weight: bold;
        border-radius: 4px;
        font-size: 1.1rem;
        transition: all 0.3s;
    }

        .search-btn:hover {
            background: #e6a200;
        }

    /* Sidebar Filters */
    .filter-card {
        background: white;
        border-radius: 8px;
        border: 1px solid var(--border-color);
        overflow: hidden;
        margin-bottom: 20px;
    }

    .filter-header {
        background: #007bff; /* Vezeeta Blue for header, or stick to Green? Let's use Blue to match 'Like this' request slightly, or Green for brand. Sticking to Green for consistency but layout is key. */
        background: var(--primary-green);
        color: white;
        padding: 15px;
        font-weight: bold;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .filter-body {
        padding: 15px;
    }

    .filter-group {
        border-bottom: 1px solid #eee;
        padding-bottom: 15px;
        margin-bottom: 15px;
    }

        .filter-group:last-child {
            border-bottom: none;
            padding-bottom: 0;
            margin-bottom: 0;
        }

    .filter-title {
        font-weight: bold;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.95rem;
    }

    .form-check-label {
        font-size: 0.9rem;
        color: #555;
        cursor: pointer;
    }

    /* Technician Card */
    .tech-card {
        background: white;
        border-radius: 8px;
        border: 1px solid var(--border-color);
        margin-bottom: 20px;
        overflow: hidden;
        transition: box-shadow 0.3s;
        display: flex;
        flex-direction: column;
    }

        .tech-card:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

    @@media (min-width: 768px) {
        .tech-card {
            flex-direction: row;
        }
    }

    /* Tech Info (Right Side) */
    .tech-info-section {
        padding: 20px;
        flex: 1.5;
        border-left: 1px solid #eee;
    }

    .tech-header {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
    }

    .tech-img {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid #eee;
    }

    .tech-details h4 {
        font-size: 1.1rem;
        font-weight: bold;
        margin-bottom: 5px;
        color: var(--primary-green);
    }

    .tech-title {
        font-size: 0.85rem;
        color: #666;
        margin-bottom: 5px;
    }

    .tech-rating {
        color: var(--accent-yellow);
        font-size: 0.8rem;
    }

    .tech-meta {
        font-size: 0.85rem;
        color: #555;
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

        .tech-meta i {
            color: var(--primary-green);
            width: 20px;
            text-align: center;
        }

    /* Booking Section (Left Side) */
    .booking-section {
        flex: 1;
        padding: 15px;
        background: #fcfcfc;
        display: flex;
        flex-direction: column;
        justify-content: center;
        border-top: 1px solid #eee;
    }

    @@media (min-width: 768px) {
        .booking-section {
            border-top: none;
        }
    }

    .booking-header {
        text-align: center;
        margin-bottom: 10px;
        font-size: 0.9rem;
        font-weight: bold;
        color: white;
        background: var(--primary-green);
        padding: 5px;
        border-radius: 4px;
    }

    .booking-slots {
        display: flex;
        gap: 5px;
        overflow-x: auto;
        padding-bottom: 10px;
        justify-content: center;
    }

    .slot-card {
        background: white;
        border: 1px solid var(--primary-green);
        border-radius: 4px;
        min-width: 100px;
        text-align: center;
        padding: 10px 5px;
        cursor: pointer;
        transition: all 0.2s;
    }

        .slot-card:hover {
            background: var(--primary-green);
            color: white;
        }

    .slot-day {
        font-size: 0.8rem;
        font-weight: bold;
        margin-bottom: 5px;
    }

    .slot-time {
        font-size: 0.75rem;
    }

    .btn-book {
        background: #d9534f; /* Red like Vezeeta booking button */
        color: white;
        width: 100%;
        border: none;
        padding: 8px;
        border-radius: 4px;
        font-weight: bold;
        margin-top: 10px;
    }

        .btn-book:hover {
            background: #c9302c;
        }

    /* Scrollbar for slots */
    .booking-slots::-webkit-scrollbar {
        height: 4px;
    }

    .booking-slots::-webkit-scrollbar-thumb {
        background: #ccc;
        border-radius: 4px;
    }
</style>

<!-- Top Search Section -->
<div class="search-section">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h2 class="mb-3 text-center d-none d-md-block">Ø§Ø­Ø¬Ø² Ù…Ø¹ Ø£ÙØ¶Ù„ Ø§Ù„ØµÙ†Ø§ÙŠØ¹ÙŠØ© ÙÙŠ Ù…ØµØ±</h2>
                <form action="@Url.Action("Search", "Services")" method="get">
                    <div class="search-container">
                        <div class="search-item">
                            <label class="search-label"><i class="fas fa-tools"></i> Ø§Ù„ØªØ®ØµØµ</label>
                            <select name="serviceType" class="search-select">
                                <option value="">Ø§Ø®ØªØ± Ø§Ù„ØªØ®ØµØµ</option>
                                <option value="plumbing">Ø³Ø¨Ø§ÙƒØ©</option>
                                <option value="electrical">ÙƒÙ‡Ø±Ø¨Ø§Ø¡</option>
                                <option value="carpentry">Ù†Ø¬Ø§Ø±Ø©</option>
                                <option value="painting">Ù†Ù‚Ø§Ø´Ø©</option>
                            </select>
                        </div>
                        <div class="search-item">
                            <label class="search-label"><i class="fas fa-map-marker-alt"></i> Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</label>
                            <select class="search-select">
                                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</option>
                                <option>Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©</option>
                                <option>Ø§Ù„Ø¬ÙŠØ²Ø©</option>
                                <option>Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©</option>
                            </select>
                        </div>
                        <div class="search-item">
                            <label class="search-label"><i class="fas fa-map-pin"></i> Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</label>
                            <select class="search-select">
                                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</option>
                                <option>Ù…Ø¯ÙŠÙ†Ø© Ù†ØµØ±</option>
                                <option>Ø§Ù„Ù…Ø¹Ø§Ø¯ÙŠ</option>
                                <option>Ø§Ù„ØªØ¬Ù…Ø¹ Ø§Ù„Ø®Ø§Ù…Ø³</option>
                            </select>
                        </div>
                        <div class="search-item">
                            <label class="search-label"><i class="fas fa-user"></i> Ø§Ø³Ù… Ø§Ù„ØµÙ†Ø§ÙŠØ¹ÙŠ</label>
                            <input type="text" class="search-select" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…..." style="border-bottom: 1px solid #eee;">
                        </div>
                        <button type="submit" class="search-btn"><i class="fas fa-search"></i> Ø§Ø¨Ø­Ø«</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- ğŸ” Filter Form (Connected to MVC Controller) -->
<form method="get" action="/Services/Index"
      style="margin:20px 0; padding:15px; background:#fff; border-radius:10px; box-shadow:0 2px 6px #ddd; direction:rtl">

    <div style="display:flex; gap:15px; flex-wrap:wrap">

        <!-- Category -->
        <select name="categoryId" style="padding:10px; border-radius:8px; min-width:150px;">
            <option value="">Ø§Ø®ØªØ§Ø± Ø§Ù„ÙØ¦Ø©</option>
            <option value="1">Ø³Ø¨Ø§ÙƒØ©</option>
            <option value="2">ÙƒÙ‡Ø±Ø¨Ø§Ø¡</option>
            <option value="3">Ù†Ø¬Ø§Ø±Ø©</option>
        </select>

        <!-- City -->
        <input type="text" name="city" placeholder="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"
               style="padding:10px; border-radius:8px; border:1px solid #ccc; min-width:150px" />

        <!-- Min Price -->
        <input type="number" name="minPrice" placeholder="Ø§Ù‚Ù„ Ø³Ø¹Ø±"
               style="padding:10px; border-radius:8px; border:1px solid #ccc; min-width:150px" />

        <!-- Max Price -->
        <input type="number" name="maxPrice" placeholder="Ø§Ø¹Ù„Ù‰ Ø³Ø¹Ø±"
               style="padding:10px; border-radius:8px; border:1px solid #ccc; min-width:150px" />
        <!-- Rating -->
        <select name="rating" style="padding:10px; border-radius:8px; min-width:150px">
            <option value="">ØªÙ‚ÙŠÙŠÙ…</option>
            <option value="1">1â˜…+</option>
            <option value="2">2â˜…+</option>
            <option value="3">3â˜…+</option>
            <option value="4">4â˜…+</option>
        </select>

        <button type="submit"
                style="padding:10px 20px; border:none; border-radius:8px; background:#0b6e28; color:#fff; font-weight:bold">
            Ø§Ø¨Ø­Ø« ğŸ”
        </button>

    </div>
</form>


<div class="container">
    <div class="row">
        <!-- Sidebar Filters (Right Side) -->
        <div class="col-lg-3 order-lg-2 mb-4">
            <div class="filter-card">
                <div class="filter-header">
                    <span><i class="fas fa-filter me-2"></i> Ø­Ø¯Ø¯ Ø¨Ø­Ø«Ùƒ</span>
                </div>
                <div class="filter-body">
                    <div class="filter-group">
                        <div class="filter-title"><i class="fas fa-user-tag"></i> Ø§Ù„Ù„Ù‚Ø¨</div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="role1">
                            <label class="form-check-label" for="role1">Ø£Ø³Ø·Ù‰</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="role2">
                            <label class="form-check-label" for="role2">Ù…Ù‡Ù†Ø¯Ø³</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="role3">
                            <label class="form-check-label" for="role3">ÙÙ†ÙŠ</label>
                        </div>
                    </div>


                    <div class="filter-group">
                        <div class="filter-title"><i class="fas fa-money-bill-wave"></i> Ø§Ù„Ø³Ø¹Ø±</div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="price1">
                            <label class="form-check-label" for="price1">Ø£Ù‚Ù„ Ù…Ù† 50 Ø¬.Ù…</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="price2">
                            <label class="form-check-label" for="price2">Ù…Ù† 50 Ø¥Ù„Ù‰ 100 Ø¬.Ù…</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="price3">
                            <label class="form-check-label" for="price3">Ø£ÙƒØ«Ø± Ù…Ù† 100 Ø¬.Ù…</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content (Left Side) -->
        <div class="col-lg-9 order-lg-1">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="fw-bold">ÙƒÙ„ Ø§Ù„ØªØ®ØµØµØ§Øª <span class="text-muted fs-6">(@(Model?.Count() ?? 0) ØµÙ†Ø§ÙŠØ¹ÙŠ)</span></h5>
                <div class="dropdown">
                    <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">
                        Ø§Ù„ØªØ±ØªÙŠØ¨: Ø§Ù„Ø£ÙƒØ«Ø± ØªØ·Ø§Ø¨Ù‚Ø§Ù‹
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">Ø§Ù„Ø£Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹</a></li>
                        <li><a class="dropdown-item" href="#">Ø§Ù„Ø£Ù‚Ù„ Ø³Ø¹Ø±Ø§Ù‹</a></li>
                    </ul>
                </div>
            </div>
            @if (Model != null && Model.Any())
            {
                @foreach (var user in Model)
                {
                    <div class="tech-card animate_animated animate_fadeInUp">
                        <!-- Info Section -->
                        <div class="tech-info-section">
                            <div class="tech-header">
                                <img src="@(user.ProfilePicture?.Path ?? "https://placehold.co/100x100?text=User")"
                                     class="tech-img"
                                     alt="@user.FirstName"
                                     onerror="this.onerror=null;this.src='https://placehold.co/100x100?text=User';" />
                                <div class="tech-details">
                                    <h4>@user.FirstName @user.LastName</h4>
                                    <p class="tech-title">ØµÙ†Ø§ÙŠØ¹ÙŠ Ø¹Ø§Ù… ÙˆÙ…Ø­ØªØ±Ù ÙÙŠ Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„Ù…Ù†Ø²Ù„ÙŠØ©</p>
                                    <div class="tech-rating">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star-half-alt"></i>
                                        <span class="text-dark ms-1 fw-bold">4.5</span>
                                        <span class="text-muted ms-1">(150 ØªÙ‚ÙŠÙŠÙ…)</span>
                                    </div>
                                </div>
                            </div>

                            <div class="tech-meta">
                                <div><i class="fas fa-stethoscope"></i> Ù…ØªØ®ØµØµ ÙÙŠ: <span class="fw-bold text-dark">ØµÙŠØ§Ù†Ø© Ø¹Ø§Ù…Ø©</span></div>
                                <div><i class="fas fa-map-marker-alt"></i> Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: @(user.Address?.City ?? "Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©")ØŒ @(user.Address?.Street ?? "ØºÙŠØ± Ù…Ø­Ø¯Ø¯")</div>
                                <div><i class="fas fa-money-bill-alt"></i> Ø³Ø¹Ø± Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©: <span class="fw-bold text-success">50 Ø¬.Ù…</span></div>
                                <div><i class="fas fa-phone-alt"></i> 16676 - Ø³Ø¹Ø± Ù…ÙƒØ§Ù„Ù…Ø© Ø¹Ø§Ø¯ÙŠØ©</div>
                            </div>
                        </div>
                        <!-- Booking Section -->
                        <div class="booking-section">
                            <div class="booking-header">Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø­Ø©</div>

                            <!-- Carousel for slots -->
                            <div id="carousel-@user.Id" class="carousel slide" data-bs-ride="false">
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <div class="booking-slots">
                                            <div class="slot-card">
                                                <div class="slot-day">Ø§Ù„ÙŠÙˆÙ…</div>
                                                <div class="slot-time">02:00 Ù…</div>
                                            </div>
                                            <div class="slot-card">
                                                <div class="slot-day">Ø§Ù„ÙŠÙˆÙ…</div>
                                                <div class="slot-time">04:00 Ù…</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="carousel-item">
                                        <div class="booking-slots">
                                            <div class="slot-card">
                                                <div class="slot-day">ØºØ¯Ø§Ù‹</div>
                                                <div class="slot-time">10:00 Øµ</div>
                                            </div>
                                            <div class="slot-card">
                                                <div class="slot-day">ØºØ¯Ø§Ù‹</div>
                                                <div class="slot-time">12:00 Ù…</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <button class="carousel-control-prev" type="button" data-bs-target="#carousel-@user.Id" data-bs-slide="prev" style="width: 20px; background: #ccc; border-radius: 0 4px 4px 0;">
                                    <span class="carousel-control-prev-icon" aria-hidden="true" style="width: 10px;"></span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#carousel-@user.Id" data-bs-slide="next" style="width: 20px; background: #ccc; border-radius: 4px 0 0 4px;">
                                    <span class="carousel-control-next-icon" aria-hidden="true" style="width: 10px;"></span>
                                </button>
                            </div>

                            <div class="text-center mt-2 text-muted small">
                                Ø­Ø¬Ø² Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†ØŒ Ø§Ù„Ø¯ÙØ¹ ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹
                            </div>
                            <button class="btn-book">Ø§Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</button>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="alert alert-info text-center">
                    Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØµÙ†Ø§ÙŠØ¹ÙŠØ© Ù…ØªØ§Ø­ÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ØªØµÙ†ÙŠÙ.
                </div>
            }
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Initialize carousels manually if needed, or rely on data-bs attributes
    </script>
}
